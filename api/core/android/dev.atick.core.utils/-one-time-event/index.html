<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>OneTimeEvent</title>
<link href="../../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../../../";</script>
    <script>document.documentElement.classList.replace("no-js", "js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
      if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
          document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
      } else {
        const savedDarkMode = JSON.parse(storage)
        if (savedDarkMode === true) {
          document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
      }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async></script>
<script type="text/javascript" src="../../../../scripts/sourceset_dependencies.js" async></script>
<link href="../../../../styles/style.css" rel="Stylesheet">
<link href="../../../../styles/main.css" rel="Stylesheet">
<link href="../../../../styles/prism.css" rel="Stylesheet">
<link href="../../../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../../../ui-kit/ui-kit.min.css" rel="Stylesheet">
<script type="text/javascript" src="../../../../scripts/safe-local-storage_blocking.js"></script>
<script type="text/javascript" src="../../../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../../../ui-kit/ui-kit.min.js" defer></script>
<script type="text/javascript" src="../../../../dokka-mermaid.js" async></script></head>
<body>
<div class="root">
    <header class="navigation theme-dark" id="navigation-wrapper" role="banner">
<a class="library-name--link" href="../../../../index.html" tabindex="1">
                    Jetpack
            </a>        <button class="navigation-controls--btn navigation-controls--btn_toc ui-kit_mobile-only" id="toc-toggle" type="button">Toggle table of contents
        </button>
        <div class="navigation-controls--break ui-kit_mobile-only"></div>
        <div class="library-version" id="library-version">
        </div>
        <div class="navigation-controls">
        <ul class="filter-section filter-section_loading" id="filter-section" aria-label="Target filter">
                <button class="platform-tag platform-selector jvm-like" data-active="" aria-pressed="true" data-filter=":core:android/main">androidJvm</button>
            <div class="dropdown filter-section--dropdown" data-role="dropdown" id="filter-section-dropdown">
                <button class="button button_dropdown filter-section--dropdown-toggle" role="combobox" data-role="dropdown-toggle" aria-controls="platform-tags-listbox" aria-haspopup="listbox" aria-expanded="false" aria-label="Toggle source sets"></button>
                <ul role="listbox" id="platform-tags-listbox" class="dropdown--list" data-role="dropdown-listbox" aria-label="Target filter">
                    <div class="dropdown--header"><span>Target filter</span>
                        <button class="button" data-role="dropdown-toggle" aria-label="Close target filter">
                            <i class="ui-kit-icon ui-kit-icon_cross"></i>
                        </button>
                    </div>
                        <li role="option" class="dropdown--option platform-selector-option jvm-like" tabindex="0">
                            <label class="checkbox">
                                <input type="checkbox" class="checkbox--input" id=":core:android/main" data-filter=":core:android/main">
                                <span class="checkbox--icon"></span>
                                androidJvm
                            </label>
                        </li>
                </ul>
                <div class="dropdown--overlay"></div>
            </div>
        </ul>
            <button class="navigation-controls--btn navigation-controls--btn_theme" id="theme-toggle-button" type="button">Switch theme
            </button>
            <div class="navigation-controls--btn navigation-controls--btn_search" id="searchBar" role="button">Search in
                API
            </div>
        </div>
    </header>
    <div id="container">
        <nav id="leftColumn" class="sidebar" data-item-type="SECTION" data-item-config="{&quot;defaultSize&quot;: 280, &quot;minSize&quot;: 200, &quot;maxSize&quot;: 400}">
            <a class="toc--skip-link" href="#main">Skip to content</a>
            <div class="dropdown theme-dark_mobile" data-role="dropdown" id="toc-dropdown">
                <ul role="listbox" id="toc-listbox" class="dropdown--list dropdown--list_toc-list" data-role="dropdown-listbox" aria-label="Table of contents">
                    <div class="dropdown--header">
                            <span>
                                    Jetpack
                            </span>
                        <button class="button" data-role="dropdown-toggle" aria-label="Close table of contents">
                            <i class="ui-kit-icon ui-kit-icon_cross"></i>
                        </button>
                    </div>
                    <div class="sidebar--inner" id="sideMenu"></div>
                </ul>
                <div class="dropdown--overlay"></div>
            </div>
        </nav>
        <div id="resizer" class="resizer" data-item-type="BAR"></div>
        <div id="main" data-item-type="SECTION" role="main">
<div class="main-content" data-page-type="classlike" id="content" pageids=":core:android::dev.atick.core.utils/OneTimeEvent///PointingToDeclaration//1720691861">
  <div class="breadcrumbs"><a href="../../index.html">:core:android</a><span class="delimiter">/</span><a href="../index.html">dev.atick.core.utils</a><span class="delimiter">/</span><span class="current">OneTimeEvent</span></div>
  <div class="cover ">
    <h1 class="cover"><span>One</span><wbr><span>Time</span><wbr><span><span>Event</span></span></h1>
    <div class="platform-hinted  with-platform-tabs" data-platform-hinted="data-platform-hinted">
      <div class="platform-bookmarks-row" data-toggle-list="data-toggle-list"><button class="platform-bookmark" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main" data-active="" data-toggle=":core:android/main">androidJvm</button></div>
<div class="content sourceset-dependent-content" data-active="" data-togglable=":core:android/main"><div class="symbol monospace"><span class="token keyword">class </span><a href="index.html">OneTimeEvent</a><span class="token operator">&lt;</span><a href="index.html">T</a><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">content<span class="token operator">: </span><a href="index.html">T</a></span></span><span class="token punctuation">)</span></div><p class="paragraph">A thread-safe wrapper for one-time events that should be consumed only once, even when observed multiple times.</p><p class="paragraph">This pattern solves a common problem in Android development: preventing events (like showing a snackbar, navigating to another screen, or displaying an error) from being triggered multiple times when the UI is recreated (e.g., due to configuration changes).</p><h2 class="">The Problem It Solves</h2><p class="paragraph">When using StateFlow or LiveData, UI recompositions or lifecycle events can cause the same state to be observed multiple times. For events like "show error snackbar", this would result in the same error appearing repeatedly, which is undesirable.</p><h2 class="">How It Works</h2><ul><li><p class="paragraph">On first access via <a href="get-content-if-not-handled.html">getContentIfNotHandled</a>, returns the content and marks it as handled</p></li><li><p class="paragraph">Subsequent calls to <a href="get-content-if-not-handled.html">getContentIfNotHandled</a> return null</p></li><li><p class="paragraph">Uses <a href="https://developer.android.com/reference/kotlin/java/util/concurrent/atomic/AtomicBoolean.html">AtomicBoolean</a> for thread-safe handling without synchronization</p></li><li><p class="paragraph"><a href="peek-content.html">peekContent</a> allows inspecting the content without consuming it (useful for debugging/logging)</p></li></ul><h2 class="">Usage in UiState</h2><p class="paragraph">This class is primarily used for error events in UiState:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">data class UiState&lt;T : Any&gt;(<br>    val data: T,<br>    val loading: Boolean = false,<br>    val error: OneTimeEvent&lt;Throwable?&gt; = OneTimeEvent(null)<br>)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class="">Usage in StatefulComposable</h2><p class="paragraph">The StatefulComposable automatically handles one-time events:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">state.error.getContentIfNotHandled()?.let { error -&gt;<br>    LaunchedEffect(onShowSnackbar) {<br>        onShowSnackbar(error.message.toString(), SnackbarAction.REPORT, error)<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class="">When to Use</h2><p class="paragraph">Use OneTimeEvent for:</p><ul><li><p class="paragraph">Error messages/snackbars</p></li><li><p class="paragraph">Navigation events</p></li><li><p class="paragraph">Showing dialogs</p></li><li><p class="paragraph">One-time animations</p></li><li><p class="paragraph">Any event that should happen once per trigger, not once per observation</p></li></ul><h2 class="">When NOT to Use</h2><p class="paragraph">Don't use OneTimeEvent for:</p><ul><li><p class="paragraph">Regular state data (use plain properties)</p></li><li><p class="paragraph">Loading states (use Boolean)</p></li><li><p class="paragraph">Data that should persist across recompositions</p></li></ul><h2 class="">Thread Safety</h2><p class="paragraph">This implementation uses <a href="https://developer.android.com/reference/kotlin/java/util/concurrent/atomic/AtomicBoolean.html#compareandset">AtomicBoolean.compareAndSet</a> to ensure thread-safe handling without requiring explicit synchronization, making it safe to use from multiple threads.</p><h2 class="">Related Reading</h2><p class="paragraph">Based on the SingleLiveEvent pattern: https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150</p><h4 class="tableheader">Parameters</h4><div class="table"><div class="table-row table-row_content" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>T</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The type of the event content. Can be nullable.</p></div></div></div></div></div><h4 class="tableheader">See also</h4><div class="table"><div class="table-row table-row_content" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><span>Ui</span><wbr><span><span>State</span></span></div></span></div><div></div></div></div><div class="table-row table-row_content" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><span>Stateful</span><wbr><span><span>Composable</span></span></div></span></div><div></div></div></div></div></div>    </div>
  </div>
  <div class="tabbedcontent">
    <div class="tabs-section" tabs-section="tabs-section"><button class="section-tab" data-active="" data-togglable="CONSTRUCTOR,TYPE,PROPERTY,FUNCTION">Members</button></div>
    <div class="tabs-section-body">
      <div data-togglable="CONSTRUCTOR">
        <h2 class="tableheader">Constructors</h2>
        <div class="table"><a data-name="-386717076%2FConstructors%2F1720691861" anchor-label="OneTimeEvent" id="-386717076%2FConstructors%2F1720691861" data-filterable-set=":core:android/main"></a>
          <div class="table-row table-row_content" data-togglable="CONSTRUCTOR" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="-one-time-event.html"><span>One</span><wbr><span>Time</span><wbr><span><span>Event</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-386717076%2FConstructors%2F1720691861"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted  with-platform-tabs" data-platform-hinted="data-platform-hinted">
                    <div class="platform-bookmarks-row" data-toggle-list="data-toggle-list"><button class="platform-bookmark" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main" data-active="" data-toggle=":core:android/main">androidJvm</button></div>
<div class="content sourceset-dependent-content" data-active="" data-togglable=":core:android/main"><div class="symbol monospace"><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">content<span class="token operator">: </span><a href="index.html">T</a></span></span><span class="token punctuation">)</span></div></div>                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-togglable="FUNCTION">
        <h2 class="tableheader">Functions</h2>
        <div class="table"><a data-name="-1993867536%2FFunctions%2F1720691861" anchor-label="getContentIfNotHandled" id="-1993867536%2FFunctions%2F1720691861" data-filterable-set=":core:android/main"></a>
          <div class="table-row table-row_content" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="get-content-if-not-handled.html"><span>get</span><wbr><span>Content</span><wbr><span>If</span><wbr><span>Not</span><wbr><span><span>Handled</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1993867536%2FFunctions%2F1720691861"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted  with-platform-tabs" data-platform-hinted="data-platform-hinted">
                    <div class="platform-bookmarks-row" data-toggle-list="data-toggle-list"><button class="platform-bookmark" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main" data-active="" data-toggle=":core:android/main">androidJvm</button></div>
<div class="content sourceset-dependent-content" data-active="" data-togglable=":core:android/main"><div class="symbol monospace"><span class="token keyword">fun </span><a href="get-content-if-not-handled.html"><span class="token function">getContentIfNotHandled</span></a><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">: </span><a href="index.html">T</a><span class="token operator">?</span></div><div class="brief "><p class="paragraph">Returns the content if it hasn't been handled yet, then marks it as handled.</p></div></div>                  </div>
                </div>
              </div>
            </div>
          </div>
<a data-name="-937682045%2FFunctions%2F1720691861" anchor-label="peekContent" id="-937682045%2FFunctions%2F1720691861" data-filterable-set=":core:android/main"></a>
          <div class="table-row table-row_content" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="peek-content.html"><span>peek</span><wbr><span><span>Content</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-937682045%2FFunctions%2F1720691861"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted  with-platform-tabs" data-platform-hinted="data-platform-hinted">
                    <div class="platform-bookmarks-row" data-toggle-list="data-toggle-list"><button class="platform-bookmark" data-filterable-current=":core:android/main" data-filterable-set=":core:android/main" data-active="" data-toggle=":core:android/main">androidJvm</button></div>
<div class="content sourceset-dependent-content" data-active="" data-togglable=":core:android/main"><div class="symbol monospace"><span class="token keyword">fun </span><a href="peek-content.html"><span class="token function">peekContent</span></a><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">: </span><a href="index.html">T</a></div><div class="brief "><p class="paragraph">Returns the content without marking it as handled.</p></div></div>                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
    <div class="footer">
        <div class="footer--container">
            <a href="#content" id="go-to-top-link" class="footer--button footer--button_go-to-top"></a>
            <div class="footer--content">
                <div>
                    <span>Generated by </span>
                    <a class="footer--link footer--link_external" href="https://github.com/Kotlin/dokka">
                        Dokka
                    </a>
                    <div>Made with ❤️ by Atick Faisal</div>
                </div>
            </div>
        </div>
    </div>
        </div>
    </div>
</div>
</body>
</html>